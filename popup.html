<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Tab Memory Purge</title>
    <style type="text/css">
        button {
            width: 5em;
            border-width: 1px;
            border-radius: 5px;
            box-shadow: 0px 0px 0px 1px gray;

            margin-bottom: 5px;
        }
    </style>
</head>
<body>

<button onclick="SendRequest('purge')"><span class="purgeText"></span></button>
<button onclick="SendRequest('restore')"><span class="restoreText"></span></button>

<script type="text/javascript">
    var locale_i18n = [
        'restore', 'purge',
    ];
    
    function SendRequest(event_name) {
        chrome.extension.sendRequest({ event : event_name });
    }
    
    function Run()
    {        // テキストの設定
        for (var i = 0; i < locale_i18n.length; i++) {
            var el      = document.getElementsByClassName(locale_i18n[i] + 'Text');
            var message = chrome.i18n.getMessage(locale_i18n[i]);
            for (var j = 0; j < el.length; j++) {
                var string      = el[j].innerHTML;
                var index       = string.lastIndexOf('</');
                el[j].innerHTML = string.substring(0, index) + message
                                        + string.substring(index);
            }
        }
    }
    
    window.addEventListener('DOMContentLoaded', Run, false);
</script>
</body>
</html>

