<!DOCTYPE html>
<html lang="ja">
<head>
    <script type="text/javascript" src="js/default.js"></script>
    <script type="text/javascript" src="js/purge.js"></script>
    <script type="text/javascript">
        /**
         * 拡張機能がインストールされたときの処理
         * @return なし
         */
        function onInstall() {
            console.log("Extension Installed.");
        }

        /**
         * 拡張機能がアップデートされたときの処理
         * @return なし
         */
        function onUpdate() {
            console.log("Extension Updated.");
            RestoreTabs(); // purge.js
        }

        /**
         * 拡張機能のバージョンを返す
         * @return {String} 拡張機能のバージョン
         */
        function getVersion() {
            var details = chrome.app.getDetails();
            return details.version;
        }

        // 初期化(現在の開いているタブに対して機能の有効化)
        Initialized();

        // この拡張機能のバージョンチェック
        var currVersion = getVersion();
        var prevVersion = localStorage['version'];
        if (currVersion != prevVersion) {
            // この拡張機能でインストールしたかどうか
            if (typeof prevVersion == 'undefined') {
                onInstall();
            } else {
                onUpdate();
            }
            localStorage['version'] = currVersion;
        }
    </script>
</head>
<body>

</body>
</html>

